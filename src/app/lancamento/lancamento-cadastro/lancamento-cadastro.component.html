<div class="container">
    <form #lancamentoCadastroForm="ngForm" (ngSubmit)="onSubmit(lancamentoCadastroForm)">
        <div class="p-grid">
            <div class="p-col-12">
                <h1>Novo lançamento</h1>
            </div>
            <div class="p-col-12">
                <p-selectButton [options]="tipos" #tipo></p-selectButton>
            </div>
            <div class="content">
                <div>
                    <label>Vencimento</label>
                    <p-calendar dateFormat="dd/mm/yy" [inline]="false" [readonlyInput]="false" [showIcon]="false"
                        ngModel name="vencimento" #vencimento="ngModel" [required]="true">
                    </p-calendar>
                    <app-message [control]="vencimento" error="required" text="Informe a data de vecimento"> 
                    </app-message>
                </div>
                <div>
                    <label>{{ tipo.value === 'RECEITA' ? 'Recebimento' : 'Pagamento' }}</label>
                    <p-calendar dateFormat="dd/mm/yy" ngModel name="recebimento_pagamento"
                        #recebimento_pagamento="ngModel" [required]="true"></p-calendar>
                    <app-message [control]="recebimento_pagamento" error="required"
                        text="Informe a data de {{ tipo.value === 'RECEITA' ? 'Recebimento' : 'Pagamento' }} ">
                    </app-message>
                </div>
            </div>
            <div class="content-grid">
                <div class="content-grid-child">
                    <label>Descrição</label>
                    <input pInputText type="text" class="descricao" name="descricao" ngModel #descricao="ngModel"
                        required minlength="5">
                </div>
                <div class="content-grid-child">
                    <label>Valor</label>
                    <input pInputText type="text" placeholder="0,00" currencyMask
                        [options]="{ prefix: 'R$', thousands: '.', decimal: ',', allowNegative: false }" ngModel
                        name="valor" #valor="ngModel" required>
                </div>
                <!-- COMPONENTE DE MESSAGEM PRIMENG -->
               <p-message severity="error" text="Informe uma descrição"
                    *ngIf="descricao.hasError('required') && descricao.touched"></p-message>
                <!-- MEU COMPONENTE DE MENSAGEM -->
                <app-message [control]="descricao" error="minlength"
                    text="Mínimo de {{ descricao.errors?.minlength?.requiredLength }} caracteres">
                </app-message>
                <app-message [control]="valor" error="required" text="Informe um valor"></app-message>
            </div>
            <div class="content">
                <div class="p-col-12">
                    <label>Categoria</label>
                    <p-dropdown [options]="categorias" placeholder="Selecione" optionLabel="descricao"
                        optionValue="codigo" #categoriaSelecionada ngModel name="categoria" #categoria="ngModel"
                        [required]="true"></p-dropdown>
                    <app-message [control]="categoria" error="required" text="Informe uma categoria"></app-message>
                    {{ categoriaSelecionada.value }}
                </div>
                <div class="p-col-12">
                    <label>Pessoa</label>
                    <p-dropdown [options]="pessoas" placeholder="Selecione" [filter]="true" ngModel name="pessoa"
                        #pessoa="ngModel" [required]="true"></p-dropdown>
                    <app-message [control]="pessoa" error="required" text="Informe uma pessoa"></app-message>
                    {{ pessoa.value }}
                </div>
            </div>
        </div>
        <div class="p-col-12">
            <div class="p-col-12">
                <label>Observação</label>
            </div>
            <div class="p-col-12 p-fluid">
                <textarea pInputTextarea rows="3" cols="100%" maxlength="4000"></textarea>
            </div>
        </div>
        <div class="content-flex">
            <button pButton type="submit" label="Salvar" [disabled]="!lancamentoCadastroForm.valid"></button>
            <button pButton type="button" label="Novo" class="p-button-info"></button>
            <a href="javascript:;">Voltar para a pesquisa</a>
        </div>
    </form>
</div>